<%- include('partials/header') %>

<div class="form-card" style="max-width:560px;">
  <h1><%= t.profile.edit_title %></h1>
  <p class="form-subtitle"><%= t.profile.client_subtitle %></p>

  <% if (typeof error !== 'undefined' && error) { %>
    <p class="error"><%= error %></p>
  <% } %>
  <% if (typeof success !== 'undefined' && success) { %>
    <p class="success"><%= success %></p>
  <% } %>

  <form method="POST" action="/auth/profile">
    <input type="hidden" name="_csrf" value="<%= generateCsrfToken() %>">

    <div class="form-group">
      <label for="name"><%= t.profile.full_name %></label>
      <input type="text" id="name" name="name" value="<%= profile.name %>" required>
    </div>

    <div class="form-group">
      <label for="email"><%= t.profile.email %></label>
      <input type="email" id="email" name="email" value="<%= profile.email %>" required>
    </div>

    <div class="form-group">
      <label for="phone"><%= t.profile.phone %></label>
      <input type="text" id="phone" name="phone" value="<%= profile.phone %>" placeholder="<%= t.profile.phone_placeholder %>">
    </div>

    <div class="form-group">
      <label for="company"><%= t.profile.company %></label>
      <input type="text" id="company" name="company" value="<%= profile.company %>" placeholder="<%= t.profile.company_placeholder %>">
    </div>

    <div class="form-group">
      <label for="preferred_languages"><%= t.profile.preferred_languages %></label>
      <input type="text" id="preferred_languages" name="preferred_languages" value="<%= profile.preferred_languages %>" placeholder="<%= t.profile.preferred_languages_placeholder %>">
    </div>

    <div class="form-group">
      <label for="notes"><%= t.profile.notes %></label>
      <textarea id="notes" name="notes" rows="4" placeholder="<%= t.profile.notes_placeholder %>"><%= profile.notes || '' %></textarea>
    </div>

    <button type="submit" class="btn" style="width:100%;"><%= t.profile.save_changes %></button>
  </form>

  <p class="form-footer" style="margin-top:20px;"><a href="/"><%= t.profile.back_to_home %></a></p>
</div>

<div class="form-card" style="max-width:560px; margin-top:24px;">
  <h2><%= t.profile.my_reviews_title %></h2>

  <% if (typeof reviews !== 'undefined' && reviews.length > 0) { %>
    <div class="reviews-list">
      <% reviews.forEach(function(r) { %>
        <div class="review-card">
          <div class="review-header">
            <span class="review-author"><a href="/translators/<%= r.translator_id %>"><%= r.translator_name %></a></span>
            <span class="review-rating">&#11088; <%= r.rating %>/5</span>
          </div>
          <% if (r.comment) { %>
            <p class="review-comment"><%= r.comment %></p>
          <% } %>
          <p class="review-date"><%= r.created_at %></p>
        </div>
      <% }); %>
    </div>
  <% } else { %>
    <div class="empty-state">
      <p><%= t.profile.no_reviews_yet %></p>
    </div>
  <% } %>
</div>

<%- include('partials/footer') %>
